<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/blog/_next/static/css/d34310680f0ae524e008.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/d34310680f0ae524e008.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/blog/_next/static/chunks/webpack-3297a19f96a66183618c.js" defer=""></script><script src="/blog/_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="/blog/_next/static/chunks/main-7965b115b2b3050da998.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-d7a37d6a79167d5905aa.js" defer=""></script><script src="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-911dd671514f45cf855f.js" defer=""></script><script src="/blog/_next/static/dKE0yQw6eLsE4LvwLl6j4/_buildManifest.js" defer=""></script><script src="/blog/_next/static/dKE0yQw6eLsE4LvwLl6j4/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="h-full flex flex-col"><div class="sticky top-0 shadow-md bg-gray-800 text-white"><div class="container mx-auto md:px-52 px-10"><header><div class="flex py-1.5 items-center"><a class="mr-auto hover:bg-gray-700 hover:no-underline p-3 hover:text-white py-1.5 rounded transition duration-200" href="/blog"><h1 class="text-2xl mb-0">Douglas Greyling</h1></a><a class="button" href="/blog/posts">All Posts</a></div></header></div></div><main class="bg-gray-100 pt-10 flex-auto"><div class="container mx-auto md:px-52 px-10 overflow-hidden"><div><h1>SQL Views</h1><h2 class="text-gray-400 font-extralight mb-5 text-lg">May 10 2020</h2><div><p>The more I learn about SQL the more I realize that there’s a million different ways to query the same data, but sometimes you actually just want to use the same query over and over again to get some useful information.</p>
<p>SQL views are the perfect way to ensure that you aren’t copying and pasting the same verbose SQL statement over and over again just to query data from your database.</p>
<p>A view is essentially a SQL statement which has been saved to create a type of in memory database. It’s super handy since it can take a complicated query and break it down so that you have time to focus on what matters most. There are so caveats though, no solution is perfect. Let’s dive in and learn about SQL views!</p>
<h2 id="creating-a-sql-view">Creating a SQL View</h2>
<p>Let’s imagine we have a table called <code>suppliers</code> which tracks various information about the suppliers a business uses to get resources to perform various projects.</p>
<p>If, for example, our business found that we kept performing the same sort of query where we want to find all suppliers where the amount of money spent on that supplier exceeded some threshold, then we could save ourselves some time by creating a SQL view like so:</p>
<pre><code class="language-sql">CREATE VIEW useful_suppliers AS
SELECT name, address, amount_spent
FROM suppliers
WHERE 1000 &lt; amount_spent;
</code></pre>
<p>Now, instead of having to write the same select query a million times, we have it saved in our SQL db as a view which we can query like a table.</p>
<h2 id="querying-data-from-a-sql-view">Querying data from a SQL View</h2>
<p>We can query a view much like any other SQL table.</p>
<pre><code class="language-sql">SELECT SUM(amount_spent) AS total_spent
FROM useful_suppliers;
</code></pre>
<p>Inserting/updating data into a view is a little trickier since there are certain conditions which dictate when this is possible.</p>
<p>For example, it’s possible to update our view based on the following rules:</p>
<ol>
<li>Our query does not use the DISTINCT keyword.</li>
<li>Our query does not use any summary function or set functions/operators.</li>
<li>Our query does not use the ORDER BY clause.</li>
<li>Our query does not join multiple tables.</li>
<li>Our query does not use a WHERE clause containing subqueries.</li>
<li>Our query does not use the GROUP BY or HAVING clauses.</li>
</ol>
<p>Provided we follow these rules, we can insert/update our view like anything else in SQL:</p>
<pre><code class="language-sql">INSERT INTO useful_suppliers (name, address, amount_spent)
VALUES (‘Tools R Us’, ‘123 Sesame Road’, 1200);
</code></pre>
<p>And likewise delete anything:</p>
<pre><code class="language-sql">DELETE FROM useful_suppliers
WHERE name = ‘Tools R Us’;
</code></pre>
<p>This does not mean that we cannot create a view which breaks these rules, but it just means that if we do break these rules, then we can no longer update the values directly using our view.</p>
<h2 id="changingreplacing-a-sql-view">Changing/replacing a SQL View</h2>
<p>We can also change a view we’ve created if our requirements ever change.</p>
<pre><code class="language-sql">REPLACE VIEW useful_suppliers
SELECT name, amount_spent
FROM suppliers
WHERE 9999 &lt; amount_spent;
</code></pre>
<h2 id="deleting-a-sql-view">Deleting a SQL view</h2>
<p>We can also get rid of views which we don’t need. It’s much like dropping any normal table in SQL.</p>
<pre><code class="language-sql">DROP VIEW useful_customers;
</code></pre>
<p>I hope this crash course on views has been insightful. I’ve had the unfortunate opportunity to have to come back to a database every few months, or so, just to perform the same painful and difficult-to-remember query.</p>
<p>So, I was relieved to hear that such a thing existed in SQL. Next time you find yourself with the same issue, try to save yourself the pain and consider using a view!</p>
</div></div><div class="flex justify-center pt-10 pb-20"><a class="button" href="/blog/posts"><h4>Read more posts</h4></a></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"id":4,"title":"SQL Views","date":"May 10 2020"},"slug":"sql-views","content":"\u003cp\u003eThe more I learn about SQL the more I realize that there’s a million different ways to query the same data, but sometimes you actually just want to use the same query over and over again to get some useful information.\u003c/p\u003e\n\u003cp\u003eSQL views are the perfect way to ensure that you aren’t copying and pasting the same verbose SQL statement over and over again just to query data from your database.\u003c/p\u003e\n\u003cp\u003eA view is essentially a SQL statement which has been saved to create a type of in memory database. It’s super handy since it can take a complicated query and break it down so that you have time to focus on what matters most. There are so caveats though, no solution is perfect. Let’s dive in and learn about SQL views!\u003c/p\u003e\n\u003ch2 id=\"creating-a-sql-view\"\u003eCreating a SQL View\u003c/h2\u003e\n\u003cp\u003eLet’s imagine we have a table called \u003ccode\u003esuppliers\u003c/code\u003e which tracks various information about the suppliers a business uses to get resources to perform various projects.\u003c/p\u003e\n\u003cp\u003eIf, for example, our business found that we kept performing the same sort of query where we want to find all suppliers where the amount of money spent on that supplier exceeded some threshold, then we could save ourselves some time by creating a SQL view like so:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eCREATE VIEW useful_suppliers AS\nSELECT name, address, amount_spent\nFROM suppliers\nWHERE 1000 \u0026lt; amount_spent;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, instead of having to write the same select query a million times, we have it saved in our SQL db as a view which we can query like a table.\u003c/p\u003e\n\u003ch2 id=\"querying-data-from-a-sql-view\"\u003eQuerying data from a SQL View\u003c/h2\u003e\n\u003cp\u003eWe can query a view much like any other SQL table.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eSELECT SUM(amount_spent) AS total_spent\nFROM useful_suppliers;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eInserting/updating data into a view is a little trickier since there are certain conditions which dictate when this is possible.\u003c/p\u003e\n\u003cp\u003eFor example, it’s possible to update our view based on the following rules:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eOur query does not use the DISTINCT keyword.\u003c/li\u003e\n\u003cli\u003eOur query does not use any summary function or set functions/operators.\u003c/li\u003e\n\u003cli\u003eOur query does not use the ORDER BY clause.\u003c/li\u003e\n\u003cli\u003eOur query does not join multiple tables.\u003c/li\u003e\n\u003cli\u003eOur query does not use a WHERE clause containing subqueries.\u003c/li\u003e\n\u003cli\u003eOur query does not use the GROUP BY or HAVING clauses.\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eProvided we follow these rules, we can insert/update our view like anything else in SQL:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eINSERT INTO useful_suppliers (name, address, amount_spent)\nVALUES (‘Tools R Us’, ‘123 Sesame Road’, 1200);\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd likewise delete anything:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eDELETE FROM useful_suppliers\nWHERE name = ‘Tools R Us’;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eThis does not mean that we cannot create a view which breaks these rules, but it just means that if we do break these rules, then we can no longer update the values directly using our view.\u003c/p\u003e\n\u003ch2 id=\"changingreplacing-a-sql-view\"\u003eChanging/replacing a SQL View\u003c/h2\u003e\n\u003cp\u003eWe can also change a view we’ve created if our requirements ever change.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eREPLACE VIEW useful_suppliers\nSELECT name, amount_spent\nFROM suppliers\nWHERE 9999 \u0026lt; amount_spent;\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2 id=\"deleting-a-sql-view\"\u003eDeleting a SQL view\u003c/h2\u003e\n\u003cp\u003eWe can also get rid of views which we don’t need. It’s much like dropping any normal table in SQL.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eDROP VIEW useful_customers;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eI hope this crash course on views has been insightful. I’ve had the unfortunate opportunity to have to come back to a database every few months, or so, just to perform the same painful and difficult-to-remember query.\u003c/p\u003e\n\u003cp\u003eSo, I was relieved to hear that such a thing existed in SQL. Next time you find yourself with the same issue, try to save yourself the pain and consider using a view!\u003c/p\u003e\n"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"sql-views"},"buildId":"dKE0yQw6eLsE4LvwLl6j4","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>