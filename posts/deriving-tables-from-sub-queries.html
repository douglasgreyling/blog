<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><meta name="next-head-count" content="2"/><link rel="preload" href="/blog/_next/static/css/d34310680f0ae524e008.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/d34310680f0ae524e008.css" data-n-g=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-a54b4f32bdc1ef890ddd.js"></script><script src="/blog/_next/static/chunks/webpack-3297a19f96a66183618c.js" defer=""></script><script src="/blog/_next/static/chunks/framework-895f067827ebe11ffe45.js" defer=""></script><script src="/blog/_next/static/chunks/main-7965b115b2b3050da998.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-d147442bb0f414355cce.js" defer=""></script><script src="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-d2871fd38e828eabd2bb.js" defer=""></script><script src="/blog/_next/static/1FAncJcLSt2PuqWh8WqQt/_buildManifest.js" defer=""></script><script src="/blog/_next/static/1FAncJcLSt2PuqWh8WqQt/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="h-full flex flex-col"><div class="sticky top-0 shadow-md bg-gray-800 text-white"><div class="container mx-auto md:px-52 px-10"><header><div class="flex py-1.5 items-center"><a class="mr-auto hover:bg-gray-700 hover:no-underline p-3 hover:text-white py-1.5 rounded transition duration-200" href="/"><h1 class="text-2xl mb-0">Douglas Greyling</h1></a><a class="button" href="/posts">All Posts</a></div></header></div></div><main class="bg-gray-100 pt-10 flex-auto"><div class="container mx-auto md:px-52 px-10 overflow-hidden"><div><h1>Deriving Tables From Sub-Queries</h1><h2 class="text-gray-400 font-extralight mb-5 text-lg">May 10 2020</h2><div><p>Here’s a quick lesson I learnt about. Hopefully it comes in handy some time.</p>
<p>I’ve been learning a little about SQL sub-queries lately and I recently discovered that you can query a sub-query. I hope this makes sense, but I’m sure an actual example might make more sense.</p>
<p>Let’s say we have a table of customers like this:</p>
<table>
<thead>
<tr>
<th>first_name</th>
<th>last_name</th>
<th>points</th>
</tr>
</thead>
<tbody><tr>
<td>Andy</td>
<td>Warhol</td>
<td>1000</td>
</tr>
<tr>
<td>Bobby</td>
<td>Brown</td>
<td>234</td>
</tr>
<tr>
<td>Candace</td>
<td>Lady-face</td>
<td>687</td>
</tr>
</tbody></table>
<p>Let’s say we made a query like so:</p>
<pre><code class="language-sql">SELECT first_name, points
FROM customers;
</code></pre>
<p>And then we decided (for some strange reason) that we wanted to make another query on this result where we want to find our customers with 1000 points or more. We can do this like so:</p>
<pre><code class="language-sql">SELECT first_name
FROM (
SELECT first_name, points
FROM customers
) AS gold_customers
WHERE points &gt;= 1000;
</code></pre>
<p>Now, at first this might not seem super powerful, but it could save us some effort. For example, imagine instead that we wanted to query the result of joining 2 tables together.</p>
<p>We could derive a new table by joining those 2 tables and then we could query that new derived table in the same way we normally query any other table.</p>
</div></div><div class="flex justify-center pt-10 pb-20"><a class="button" href="/posts"><h4>Read more posts</h4></a></div></div></main></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"frontmatter":{"id":3,"title":"Deriving Tables From Sub-Queries","date":"May 10 2020"},"slug":"deriving-tables-from-sub-queries","content":"\u003cp\u003eHere’s a quick lesson I learnt about. Hopefully it comes in handy some time.\u003c/p\u003e\n\u003cp\u003eI’ve been learning a little about SQL sub-queries lately and I recently discovered that you can query a sub-query. I hope this makes sense, but I’m sure an actual example might make more sense.\u003c/p\u003e\n\u003cp\u003eLet’s say we have a table of customers like this:\u003c/p\u003e\n\u003ctable\u003e\n\u003cthead\u003e\n\u003ctr\u003e\n\u003cth\u003efirst_name\u003c/th\u003e\n\u003cth\u003elast_name\u003c/th\u003e\n\u003cth\u003epoints\u003c/th\u003e\n\u003c/tr\u003e\n\u003c/thead\u003e\n\u003ctbody\u003e\u003ctr\u003e\n\u003ctd\u003eAndy\u003c/td\u003e\n\u003ctd\u003eWarhol\u003c/td\u003e\n\u003ctd\u003e1000\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eBobby\u003c/td\u003e\n\u003ctd\u003eBrown\u003c/td\u003e\n\u003ctd\u003e234\u003c/td\u003e\n\u003c/tr\u003e\n\u003ctr\u003e\n\u003ctd\u003eCandace\u003c/td\u003e\n\u003ctd\u003eLady-face\u003c/td\u003e\n\u003ctd\u003e687\u003c/td\u003e\n\u003c/tr\u003e\n\u003c/tbody\u003e\u003c/table\u003e\n\u003cp\u003eLet’s say we made a query like so:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eSELECT first_name, points\nFROM customers;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAnd then we decided (for some strange reason) that we wanted to make another query on this result where we want to find our customers with 1000 points or more. We can do this like so:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"language-sql\"\u003eSELECT first_name\nFROM (\nSELECT first_name, points\nFROM customers\n) AS gold_customers\nWHERE points \u0026gt;= 1000;\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eNow, at first this might not seem super powerful, but it could save us some effort. For example, imagine instead that we wanted to query the result of joining 2 tables together.\u003c/p\u003e\n\u003cp\u003eWe could derive a new table by joining those 2 tables and then we could query that new derived table in the same way we normally query any other table.\u003c/p\u003e\n"},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"deriving-tables-from-sub-queries"},"buildId":"1FAncJcLSt2PuqWh8WqQt","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>